"use strict";(function(){function a(t,s,o,a){var f;if(t.nodeType!==1){return}f=$(t);f.data(r,s);u.debug("beforeAdd, isInitializing: "+a+", index: "+s,f[0]);if(a!==true){f.removeClass(i);n.push(t);e.isotope("addItems",f);e.isotope()}}function f(t,n,i){var s;if(t.nodeType!==1){return}s=$(t);u.debug("afterMove, item moved from index "+s.data(r)+" to: "+n);s.data(r,n);e.isotope("updateSortData",s)}function l(t,n,r){var i;if(t.nodeType!==1){return}if(n===undefined){u.warn("beforeRemove, index is undefined!")}if(r===undefined){u.warn("beforeRemove, item is undefined!")}i=$(t);u.debug("beforeRemove, item removed at index "+n,i[0]);e.isotope("remove",i)}var e,t,n=[],r="__knockout-isotope-index",i,s,o,u;if(typeof JSLog!=="undefined"&&"Register"in JSLog){u=JSLog.Register("Knockout-Isotope")}else{u={debug:function(){},info:function(){},warn:function(){},error:function(){},SetLevel:function(){}}}ko.bindingHandlers.isotope={defaultFilterClass:"knockout-isotope-filter",defaultItemClass:"knockout-isotope-item",_getSortData:function(e){var t=e.data(r);u.debug("Getting sort data for element: "+t,e[0]);return t},makeTemplateValueAccessor:function(e){return function(){var t=e(),n,r=ko.utils.peekObservable(t);n={beforeAdd:a,afterMove:f,beforeRemove:l};if(!r||typeof r.length==="number"){ko.utils.extend(n,{foreach:t,templateEngine:ko.nativeTemplateEngine.instance});return n}ko.utils.unwrapObservable(t);ko.utils.extend(n,{foreach:r.data,as:r.as,includeDestroyed:r.includeDestroyed,templateEngine:ko.nativeTemplateEngine.instance});return n}},init:function(n,r,a,f,l){var c;u.debug("Initializing binding");i=ko.bindingHandlers.isotope.defaultFilterClass;s=ko.bindingHandlers.isotope.defaultItemClass;o={};t=false;e=$(n);if(e.children().length!==1){throw new Error("The element must have *1* child, from which to instantiate Isotope items")}c=ko.utils.unwrapObservable(r());if(c&&typeof c=="object"&&!("length"in c)){if(c.isotopeOptions){var h=c.isotopeOptions();if(typeof h!=="object"){throw new Error("isotopeOptions callback must return object")}ko.utils.extend(o,h)}if(c.filterClass){i=c.filterClass}if(c.itemClass){s=c.itemClass}}e.children().addClass(s).addClass(i);ko.bindingHandlers.template.init(n,ko.bindingHandlers.isotope.makeTemplateValueAccessor(r));return{controlsDescendantBindings:true}},update:function(r,a,f,l,c){ko.bindingHandlers.template.update(r,ko.bindingHandlers.isotope.makeTemplateValueAccessor(a),f,l,c);if(!t){o.itemSelector="."+s;o.filter="."+i;o.getSortData={index:ko.bindingHandlers.isotope._getSortData};o.sortBy="index";u.debug("Binding update called for the first time, initializing Isotope, options:",o);e.isotope(o);console.log("Elements and their sort data:")}else{u.debug("Updating binding, "+n.length+" new item(s)");$(n).addClass(i);n.splice(0,n.length);e.isotope();console.log("Elements and their sort data:")}var h=ko.bindingHandlers.isotope.makeTemplateValueAccessor(a)().foreach;ko.utils.unwrapObservable(h);t=true;return{controlsDescendantBindings:true}}}})()
