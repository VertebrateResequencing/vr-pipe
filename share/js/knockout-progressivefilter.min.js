!function(e){"use strict";"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],e):e(ko,{})}(function(e){"use strict";e.extenders.progressivefilter=function(i,t){function n(){var e;for(r.unfilteredCollectionIndex;r.unfilteredCollectionIndex<r.unfilteredCollection.length;r.unfilteredCollectionIndex++)if(e=r.unfilteredCollection[r.unfilteredCollectionIndex],e&&i.isFiltered(e)){r.add(e);break}return l++,r.unfilteredCollectionIndex++,r.unfilteredCollectionIndex<r.unfilteredCollection.length?void(l>=r.batchSize?(i.valueHasMutated(),l=0,o(n)):(l++,n())):(i.valueHasMutated(),l=0,r.unfilteredCollectionIndex=0,r.isFiltering(!1),void 0)}var o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,4)},l=0,r={};t=t||{},i.progressivefilter=r,r.unfilteredCollection=[],r.unfilteredCollectionIndex=0,r.isFiltering=e.observable(!1),r.filterFunction=t.filterFunction,r.batchSize=Math.max(parseInt(t.batchSize,10),1),r.add=t.addFunction||function(e){i.peek().push(e)},r.clear=t.clearFunction||function(){i([])},i.isFiltered=function(e){return!r.filterFunction||r.filterFunction(e)},i.filter=function(e){var t,n=[];for(t=0;t<e.length;t++)i.isFiltered(e[t])&&n.push(e[t]);r.clear(),i(n)},i.filterProgressive=function(e){r.unfilteredCollection=e.slice(0),r.unfilteredCollectionIndex=0,l=0,r.clear(),r.isFiltering.peek()||(r.isFiltering(!0),o(n))}}});
